# Hotel API (распределённая БД сети гостиниц)

Проект — учебная информационная система для сети гостиниц с распределённой реляционной БД: **1 центральная БД** и **2 филиальные**. 
Реализованы CRUD‑операции, поиск, транзакционность, процедуры, триггеры и демонстрационный сценарий.

## Архитектура

- **Central‑контур**: филиалы, отделы, сотрудники центрального офиса, поставщики и связи поставщик–филиал.
- **Branch‑контур**: гости, номера, бронирования, локальные сотрудники и связи бронирование–сотрудник.
- **Доступ к данным**: jOOQ (сгенерированные модели полностью соответствуют таблицам).
- **Транзакционность**: все операции записи выполняются в транзакциях.
- **Документация API**: OpenAPI спецификации (`static/spec/*.yaml`) доступны через Scalar.

## Быстрый старт

Запуск (Docker):
```bash
docker compose up -d
```

Scalar (документация API):
- `http://localhost:8080/scalar`

## Демонстрационный сценарий

Сценарий формирует отчёт и фиксирует изменения в БД:
```bash
./demo_report.sh
```

Результаты:
- `demo_report.md`
- `demo_report.pdf`
- `demo_report.gif`

## Тестирование

E2E‑тест:
```bash
./gradlew test --tests tisbi.gromov.hotelapi.HotelApiEndToEndTest
```

## Требования (выполнено)

- 3 БД: 1 центральная + 2 филиальные.
- ≥4 связанных таблицы в филиале.
- Индексы, процедуры, триггеры, генераторы.
- ≥15 записей в таблицах.
- CRUD и поиск.
- Транзакционность.
- CASE‑средства отражены в документации.

## Структура проекта (ключевые файлы)

- `Dockerfile` — сборка образа
- `docker-compose.yml` — запуск БД и приложения
- `src/main/resources/db/migration/**` — миграции БД
- `src/main/resources/static/spec/*.yaml` — OpenAPI спецификации
- `demo_report.sh` — демонстрационный сценарий

---

